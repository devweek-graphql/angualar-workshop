<form class="character-data">

  <!-- Avatar -->
  <div id="" class="character-data-avatar">
    <div class="img-container circle">
      <img class="avatar-image" src="{{getAvatar()}}" alt="avatar"
        style="transition: opacity 0.3s ease 0s; opacity: 1; visibility: visible;">
    </div>
  </div>

  <mat-card class="character-data-card basic-data mat-elevation-z8">
    <section class="basic-data-section">
      <mat-card-title class="card-title basic-data-first-appeareance-title">Basic Data</mat-card-title>
      <app-input value={{characterName}} name="characterName" placeholder="Name" disabled={{!isEditable}}
        [(ngModel)]="characterName" ngDefaultControl>
      </app-input>

      <app-select [values]="universes" value={{characterUniverse}} name="characterUniverse" disabled={{!isEditable}}
        [(ngModel)]="characterUniverse" ngDefaultControl></app-select>

      <app-select [values]="characterTypes" value={{characterType}} name="characterType" disabled={{!isEditable}}
        [(ngModel)]="characterType" ngDefaultControl></app-select>
    </section>

    <fieldset class="character-data-card basic-data-first-appeareance" name="characterFirstAppearance">
      <legend class="card-title basic-data-first-appeareance-title">First Apeareance</legend>

      <app-input value={{characterFirstAppearance.comicName}} placeholder="Comic Name"
        name="characterFirstAppearanceComicName" disabled={{!isEditable}}  [(ngModel)]="characterFirstAppearance.comicName" ngDefaultControl>
      </app-input>

      <app-input value={{characterFirstAppearance.year}} placeholder="Year" name="characterFirstAppearanceYear"
        disabled={{!isEditable}} [(ngModel)]="characterFirstAppearance.year" ngDefaultControl>
      </app-input>
    </fieldset>
  </mat-card>

  <!-- Teams -->
  <mat-card class="character-data-card character-data-part-of mat-elevation-z8">
    <mat-card-title class="card-title part-of-title">Teams</mat-card-title>
    <table #teams mat-table [dataSource]="characterTeams" class="character-data-teams-table" name="characterTeams">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Team's Name </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <app-input placeholder="Team Name" value={{element.name}} disabled={{!isEditable}} name="characterTeam"
            [(ngModel)]="characterTeams[i].name" ngDefaultControl>
          </app-input>
        </td>
      </ng-container>

      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef> Team's Description </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <app-input placeholder="Team Description" value={{element.description}} disabled={{!isEditable}}
            name="characterTeam" [(ngModel)]="characterTeams[i].description" ngDefaultControl>
          </app-input>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumnsTeams"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumnsTeams;"></tr>
    </table>

    <div class="add-row add-row-part-of">
      <button [hidden]="!isEditable" class="add-row-button" mat-button (click)="onAddTeam($event)">Add new team</button>
    </div>
  </mat-card>

  <!--Abilities -->
  <mat-card class="character-data-card character-data-abilities mat-elevation-z8">
    <mat-card-title class="card-title">Abilities</mat-card-title>
    <table #abilities mat-table [dataSource]="characterAbilities" class="character-data-abilities-table">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Ability </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <app-input value={{element.name}} placeholder="Ability Name" disabled={{!isEditable}} name="characterAbility"
            [(ngModel)]="characterAbilities[i].name" ngDefaultControl>
          </app-input>
        </td>
      </ng-container>

      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef> Description </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <app-input value={{element.description}} placeholder="Description" disabled={{!isEditable}}
            name="characterAbility" [(ngModel)]="characterAbilities[i].description" ngDefaultControl>
          </app-input>
        </td>
      </ng-container>

      <ng-container matColumnDef="add">
        <th mat-header-cell *matHeaderCellDef> </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <a>
            <img src="./assets/plus-circle-solid.svg" alt="add-icon">
          </a>
        </td>
      </ng-container>
      <ng-container matColumnDef="remove">
        <th mat-header-cell *matHeaderCellDef> </th>
        <td mat-cell *matCellDef="let element; let i = index">
            <a>
              <img src="./assets/minus-circle-solid.svg" alt="remove-icon">
            </a>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumnsForAbilities"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumnsForAbilities;"></tr>
    </table>

    <div class="add-row add-row-abilities">
      <button [hidden]="!isEditable" class="add-row-button" mat-button (click)="onAddAbility($event)">Add new
        ability</button>
    </div>
  </mat-card>

  <!-- allies -->
  <mat-card class="character-data-card character-data-friends mat-elevation-z8">
    <mat-card-title class="card-title">Allies</mat-card-title>
    <table #allies mat-table [dataSource]="characterAllies" class="character-data-friends-table" name="characterAllies">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Allied </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <app-input class="character-data-friends-list-item" value={{element}} placeholder="Ability Name"
            disabled={{!isEditable}} name="allied" [(ngModel)]="characterAllies[i]" ngDefaultControl>
          </app-input>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumnsForAllies"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumnsForAllies;"></tr>
    </table>

    <div class="add-row add-row-friends">
      <button [hidden]="!isEditable" class="add-row-button" mat-button (click)="onAddAllied($event)">Add new
        friend</button>
    </div>
  </mat-card>

  <div class="submit">
    <!-- <button [hidden]="!isEditable" [disabled]="!characterDetailsForm.valid" class="submit-button" -->
    <button [hidden]="!isEditable" class="submit-button" mat-button (click)="onSaveForm()">Save</button>
  </div>
</form>
